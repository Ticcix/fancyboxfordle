<?xml version="1.0" encoding="utf-8"?>
<dleplugin>
	<name>FancyBox For DLE</name>
	<description>Made By Ticcix</description>
	<icon>engine/skins/images/fancybox-ticcix.png</icon>
	<version>1.0.1</version>
	<dleversion>13</dleversion>
	<versioncompare>greater</versioncompare>
	<upgradeurl>https://ticcix.github.io/fancyboxfordle/</upgradeurl>
	<filedelete>1</filedelete>
	<needplugin></needplugin>
	<mnotice>1</mnotice>
	<mysqlinstall><![CDATA[]]></mysqlinstall>
	<mysqlupgrade><![CDATA[]]></mysqlupgrade>
	<mysqlenable><![CDATA[]]></mysqlenable>
	<mysqldisable><![CDATA[]]></mysqldisable>
	<mysqldelete><![CDATA[]]></mysqldelete>
	<phpinstall><![CDATA[]]></phpinstall>
	<phpupgrade><![CDATA[]]></phpupgrade>
	<phpenable><![CDATA[]]></phpenable>
	<phpdisable><![CDATA[]]></phpdisable>
	<phpdelete><![CDATA[]]></phpdelete>
	<notice><![CDATA[<p>вставлять - Insert - დაამატეთ<span style="color: #e03e2d;"><b>main.tpl-ში </b></span></p>
<p><span style="color: #e03e2d;"><b><span style="color: #000000;">&lt;/head&gt;</span></b></span></p>
<pre class="language-markup"><code>&lt;link rel="stylesheet" type="text/css" href="{THEME}/css/jquery.fancybox.min.css"&gt;</code></pre>
<p><span style="color: #e03e2d;"><b><span style="color: #000000;">&lt;/body&gt;</span></b></span></p>
<pre class="language-javascript"><code>&lt;script src="{THEME}/js/jquery.fancybox.min.js"&gt;&lt;/script&gt;
	   &lt;script&gt;
        $('[data-fancybox]').fancybox({
    loop: true,
            buttons: [ 
   "zoom",
   "share",
   "slideShow",
   "fullScreen",
   "download",
   "thumbs",
   "close"
],
    autoFocus: false
});
    &lt;/script&gt;</code></pre>]]></notice>
	<file name="engine/modules/show.full.php">
		<operation action="replace">
			<searchcode><![CDATA[<li><a href=\"$img_url\" onclick=\"return hs.expand(this, { slideshowGroup: 'xf_{$row['id']}_{$value[0]}' })\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></searchcode>
			<replacecode><![CDATA[<li><a href=\"$img_url\" data-fancybox=\"gallary\" data-caption=\"{$temp_alt}\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></replacecode>
		</operation>
		<operation action="replace">
			<searchcode><![CDATA[<a href=\"$img_url\" class=\"highslide\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></searchcode>
			<replacecode><![CDATA[<a href=\"$img_url\" data-fancybox data-caption=\"{$temp_alt}\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></replacecode>
		</operation>
		<operation action="before">
			<searchcode><![CDATA[$tpl->set( '{short-story}', $row['short_story'] );]]></searchcode>
			<replacecode><![CDATA[$row['short_story'] = preg_replace_callback ( "#<(a)(.+?)>#i", "enable_fancybox", $row['short_story'] );
$row['full_story'] = preg_replace_callback ( "#<(a)(.+?)>#i", "enable_fancybox", $row['full_story'] );]]></replacecode>
		</operation>
	</file>
	<file name="engine/modules/show.short.php">
		<operation action="replace">
			<searchcode><![CDATA[<li><a href=\"$img_url\" onclick=\"return hs.expand(this, { slideshowGroup: 'xf_{$row['id']}_{$value[0]}' })\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></searchcode>
			<replacecode><![CDATA[<li><a href=\"$img_url\" data-fancybox=\"gallary\" data-caption=\"{$temp_alt}\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></replacecode>
		</operation>
		<operation action="replace">
			<searchcode><![CDATA[<a href=\"$img_url\" class=\"highslide\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></searchcode>
			<replacecode><![CDATA[<a href=\"$img_url\" data-fancybox data-caption=\"{$temp_alt}\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></replacecode>
		</operation>
		<operation action="after">
			<searchcode><![CDATA[if ($config['image_lazy']) $row['short_story'] = preg_replace_callback ( "#<(img|iframe)(.+?)>#i", "enable_lazyload", $row['short_story'] );]]></searchcode>
			<replacecode><![CDATA[$row['short_story'] = preg_replace_callback ( "#<(a)(.+?)>#i", "enable_fancybox", $row['short_story'] );]]></replacecode>
		</operation>
		<operation action="before">
			<searchcode><![CDATA[$tpl->set( '{full-story}',  $row['full_story'] );]]></searchcode>
			<replacecode><![CDATA[$row['full_story'] = preg_replace_callback ( "#<(a)(.+?)>#i", "enable_fancybox", $row['full_story'] );]]></replacecode>
		</operation>
	</file>
	<file name="engine/modules/show.custom.php">
		<operation action="replace">
			<searchcode><![CDATA[<li><a href=\"$img_url\" onclick=\"return hs.expand(this, { slideshowGroup: 'xf_{$row['id']}_{$value[0]}' })\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></searchcode>
			<replacecode><![CDATA[<li><a href=\"$img_url\" data-fancybox=\"gallary\" data-caption=\"{$temp_alt}\" target=\"_blank\"><img src=\"{$thumb_url}\" alt=\"{$temp_alt}\"></a></li>]]></replacecode>
		</operation>
		<operation action="replace">
			<searchcode><![CDATA[<a href=\"$img_url\" class=\"highslide\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></searchcode>
			<replacecode><![CDATA[<a href=\"$img_url\" data-fancybox data-caption=\"{$temp_alt}\" target=\"_blank\"><img class=\"xfieldimage {$value[0]}\" src=\"$thumb_url\" alt=\"{$temp_alt}\"></a>]]></replacecode>
		</operation>
		<operation action="before">
			<searchcode><![CDATA[if ($config['image_lazy']) $row['short_story'] = preg_replace_callback ( "#<(img|iframe)(.+?)>#i", "enable_lazyload", $row['short_story'] );]]></searchcode>
			<replacecode><![CDATA[$row['short_story'] = preg_replace_callback ( "#<(a)(.+?)>#i", "enable_fancybox", $row['short_story'] );]]></replacecode>
		</operation>
	</file>
	<file name="engine/modules/functions.php">
		<operation action="before">
			<searchcode><![CDATA[function deletecomments( $id ) {]]></searchcode>
			<replacecode><![CDATA[function enable_fancybox( $matches=array() ) {

    $matches[0] = str_replace ( 'class="highslide"', 'data-fancybox="gallary"', $matches[0] );

    return $matches[0];
}]]></replacecode>
		</operation>
	</file>
</dleplugin>